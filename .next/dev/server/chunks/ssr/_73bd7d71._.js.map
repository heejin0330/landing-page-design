{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/cording/landing-page-design/actions/notion.ts"],"sourcesContent":["\"use server\";\n\ninterface SubmitWaitlistFormResult {\n  success: boolean;\n  error?: string;\n}\n\ninterface LoginResult {\n  success: boolean;\n  error?: string;\n  userType?: string;\n}\n\nexport async function submitWaitlistForm(\n  name: string,\n  email: string,\n  phone: string,\n  userType?: string\n): Promise<SubmitWaitlistFormResult> {\n  try {\n    const notionApiKey = process.env.NOTION_API_KEY;\n    const notionDatabaseId = process.env.NOTION_DATABASE_ID;\n\n    // 환경변수 검증\n    if (!notionApiKey) {\n      console.error(\"NOTION_API_KEY가 설정되지 않았습니다.\");\n      return {\n        success: false,\n        error: \"서버 설정 오류: API 키가 없습니다.\",\n      };\n    }\n\n    if (!notionDatabaseId) {\n      console.error(\"NOTION_DATABASE_ID가 설정되지 않았습니다.\");\n      return {\n        success: false,\n        error: \"서버 설정 오류: 데이터베이스 ID가 없습니다.\",\n      };\n    }\n\n    // Notion API 호출\n    const response = await fetch(\"https://api.notion.com/v1/pages\", {\n      method: \"POST\",\n      headers: {\n        Authorization: `Bearer ${notionApiKey}`,\n        \"Content-Type\": \"application/json\",\n        \"Notion-Version\": \"2022-06-28\",\n      },\n      body: JSON.stringify({\n        parent: {\n          database_id: notionDatabaseId,\n        },\n        properties: {\n          이름: {\n            title: [\n              {\n                text: {\n                  content: name,\n                },\n              },\n            ],\n          },\n          이메일: {\n            email: email,\n          },\n          전화번호: {\n            phone_number: phone,\n          },\n          ...(userType && {\n            사용자유형: {\n              select: {\n                name: userType,\n              },\n            },\n          }),\n        },\n      }),\n    });\n\n    // 응답 처리\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}));\n      console.error(\"Notion API 오류 응답:\", {\n        status: response.status,\n        statusText: response.statusText,\n        error: errorData,\n      });\n\n      // 에러 메시지 추출\n      let errorMessage = `API 오류 (${response.status})`;\n      if (errorData.message) {\n        errorMessage = errorData.message;\n      } else if (errorData.code) {\n        errorMessage = `오류 코드: ${errorData.code}`;\n      }\n\n      return {\n        success: false,\n        error: errorMessage,\n      };\n    }\n\n    // 성공 응답 확인\n    const result = await response.json().catch(() => null);\n    if (result) {\n      console.log(\n        \"Notion 데이터베이스에 성공적으로 저장되었습니다:\",\n        result.id\n      );\n    }\n\n    return {\n      success: true,\n    };\n  } catch (error) {\n    console.error(\"폼 제출 중 예외 발생:\", error);\n    return {\n      success: false,\n      error:\n        error instanceof Error\n          ? error.message\n          : \"네트워크 오류가 발생했습니다. 다시 시도해주세요.\",\n    };\n  }\n}\n\nexport async function verifyLogin(\n  name: string,\n  email: string,\n  phone: string\n): Promise<LoginResult> {\n  try {\n    const notionApiKey = process.env.NOTION_API_KEY;\n    const notionDatabaseId = process.env.NOTION_DATABASE_ID;\n\n    // 환경변수 검증\n    if (!notionApiKey) {\n      console.error(\"NOTION_API_KEY가 설정되지 않았습니다.\");\n      return {\n        success: false,\n        error: \"서버 설정 오류: API 키가 없습니다.\",\n      };\n    }\n\n    if (!notionDatabaseId) {\n      console.error(\"NOTION_DATABASE_ID가 설정되지 않았습니다.\");\n      return {\n        success: false,\n        error: \"서버 설정 오류: 데이터베이스 ID가 없습니다.\",\n      };\n    }\n\n    // Notion API로 데이터베이스 쿼리\n    const response = await fetch(\n      `https://api.notion.com/v1/databases/${notionDatabaseId}/query`,\n      {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${notionApiKey}`,\n          \"Content-Type\": \"application/json\",\n          \"Notion-Version\": \"2022-06-28\",\n        },\n        body: JSON.stringify({\n          filter: {\n            and: [\n              {\n                property: \"이름\",\n                title: {\n                  contains: name,\n                },\n              },\n              {\n                property: \"이메일\",\n                email: {\n                  equals: email,\n                },\n              },\n              {\n                property: \"전화번호\",\n                phone_number: {\n                  equals: phone,\n                },\n              },\n            ],\n          },\n        }),\n      }\n    );\n\n    // 응답 처리\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}));\n      console.error(\"Notion API 오류 응답:\", {\n        status: response.status,\n        statusText: response.statusText,\n        error: errorData,\n      });\n\n      return {\n        success: false,\n        error: \"로그인 확인 중 오류가 발생했습니다.\",\n      };\n    }\n\n    const result = await response.json().catch(() => null);\n\n    if (!result || !result.results || result.results.length === 0) {\n      return {\n        success: false,\n        error: \"일치하는 사용자 정보를 찾을 수 없습니다.\",\n      };\n    }\n\n    // 모든 결과를 확인하여 정확히 일치하는 사용자 찾기\n    for (const user of result.results) {\n      const userName = user.properties?.이름?.title?.[0]?.text?.content || \"\";\n      const userEmail = user.properties?.이메일?.email || \"\";\n      const userPhone = user.properties?.전화번호?.phone_number || \"\";\n\n      // 정확히 일치하는지 확인 (contains로 필터링했지만 정확한 일치 확인)\n      if (userName === name && userEmail === email && userPhone === phone) {\n        const userType = user.properties?.사용자유형?.select?.name || undefined;\n\n        return {\n          success: true,\n          userType,\n        };\n      }\n    }\n\n    // 필터링된 결과가 있지만 정확히 일치하지 않음\n    return {\n      success: false,\n      error: \"일치하는 사용자 정보를 찾을 수 없습니다.\",\n    };\n  } catch (error) {\n    console.error(\"로그인 검증 중 예외 발생:\", error);\n    return {\n      success: false,\n      error:\n        error instanceof Error\n          ? error.message\n          : \"네트워크 오류가 발생했습니다. 다시 시도해주세요.\",\n    };\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 216, "column": 0}, "map": {"version":3,"sources":["file:///C:/cording/landing-page-design/.next-internal/server/app/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {submitWaitlistForm as '78a333388d3e2db9241a5de54a510b23b3813ec8e2'} from 'ACTIONS_MODULE0'\nexport {verifyLogin as '70d459a2e42df3de227639d653795394176f4096ee'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA"}},
    {"offset": {"line": 236, "column": 0}, "map": {"version":3,"sources":["file:///C:/cording/landing-page-design/node_modules/.pnpm/next%4016.0.3_react-dom%4019.2.0_react%4019.2.0__react%4019.2.0/node_modules/next/src/build/webpack/loaders/next-flight-loader/server-reference.ts"],"sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\nexport { registerServerReference } from 'react-server-dom-webpack/server'\n"],"names":["registerServerReference"],"mappings":"AAAA,oDAAoD;;;+BAC3CA,2BAAAA;;;eAAAA,QAAAA,uBAAuB;;;wBAAQ","ignoreList":[0]}},
    {"offset": {"line": 250, "column": 0}, "map": {"version":3,"sources":["file:///C:/cording/landing-page-design/node_modules/.pnpm/next%4016.0.3_react-dom%4019.2.0_react%4019.2.0__react%4019.2.0/node_modules/next/src/build/webpack/loaders/next-flight-loader/action-validate.ts"],"sourcesContent":["// This function ensures that all the exported values are valid server actions,\n// during the runtime. By definition all actions are required to be async\n// functions, but here we can only check that they are functions.\nexport function ensureServerEntryExports(actions: any[]) {\n  for (let i = 0; i < actions.length; i++) {\n    const action = actions[i]\n    if (typeof action !== 'function') {\n      throw new Error(\n        `A \"use server\" file can only export async functions, found ${typeof action}.\\nRead more: https://nextjs.org/docs/messages/invalid-use-server-value`\n      )\n    }\n  }\n}\n"],"names":["ensureServerEntryExports","actions","i","length","action","Error"],"mappings":"AAAA,+EAA+E;AAC/E,yEAAyE;AACzE,iEAAiE;;;;+BACjDA,4BAAAA;;;eAAAA;;;AAAT,SAASA,yBAAyBC,OAAc;IACrD,IAAK,IAAIC,IAAI,GAAGA,IAAID,QAAQE,MAAM,EAAED,IAAK;QACvC,MAAME,SAASH,OAAO,CAACC,EAAE;QACzB,IAAI,OAAOE,WAAW,YAAY;YAChC,MAAM,OAAA,cAEL,CAFK,IAAIC,MACR,CAAC,2DAA2D,EAAE,OAAOD,OAAO,uEAAuE,CAAC,GADhJ,qBAAA;uBAAA;4BAAA;8BAAA;YAEN;QACF;IACF;AACF","ignoreList":[0]}}]
}