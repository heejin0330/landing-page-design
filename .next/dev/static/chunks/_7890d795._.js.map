{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/cording/landing-page-design/actions/gemini.ts"],"sourcesContent":["\"use server\";\r\n\r\nimport { GoogleGenerativeAI } from \"@google/generative-ai\";\r\n\r\ninterface ChatMessage {\r\n  role: \"user\" | \"assistant\";\r\n  content: string;\r\n}\r\n\r\ninterface ChatResponse {\r\n  success: boolean;\r\n  message?: string;\r\n  error?: string;\r\n}\r\n\r\nexport async function sendChatMessage(\r\n  message: string,\r\n  history: ChatMessage[] = []\r\n): Promise<ChatResponse> {\r\n  try {\r\n    const apiKey = process.env.GEMINI_API_KEY;\r\n\r\n    if (!apiKey) {\r\n      console.error(\"GEMINI_API_KEY가 설정되지 않았습니다.\");\r\n      return {\r\n        success: false,\r\n        error: \"서버 설정 오류: API 키가 없습니다.\",\r\n      };\r\n    }\r\n\r\n    const genAI = new GoogleGenerativeAI(apiKey);\r\n    const model = genAI.getGenerativeModel({ model: \"gemini-2.5-flash\" });\r\n\r\n    // 히스토리에서 초기 assistant 메시지 제외\r\n    // 첫 번째 메시지가 assistant인 경우 제외 (초기 인사 메시지)\r\n    const filteredHistory = history.filter((msg, index) => {\r\n      if (index === 0 && msg.role === \"assistant\") {\r\n        return false;\r\n      }\r\n      return true;\r\n    });\r\n\r\n    // 채팅 히스토리를 Gemini 형식으로 변환\r\n    // 첫 번째 메시지는 반드시 user여야 함\r\n    const chatHistory = filteredHistory\r\n      .map((msg) => ({\r\n        role: msg.role === \"user\" ? \"user\" : \"model\",\r\n        parts: [{ text: msg.content }],\r\n      }))\r\n      .filter((msg, index) => {\r\n        // 첫 번째 메시지가 user가 아니면 제외\r\n        if (index === 0 && msg.role !== \"user\") {\r\n          return false;\r\n        }\r\n        return true;\r\n      });\r\n\r\n    // 채팅 시작 (히스토리가 있으면 전달, 없으면 빈 배열)\r\n    const chat = model.startChat({\r\n      history: chatHistory.length > 0 ? chatHistory : undefined,\r\n    });\r\n\r\n    // 메시지 전송 및 응답 받기\r\n    const result = await chat.sendMessage(message);\r\n    const response = await result.response;\r\n    const text = response.text();\r\n\r\n    return {\r\n      success: true,\r\n      message: text,\r\n    };\r\n  } catch (error) {\r\n    console.error(\"Gemini API 오류:\", error);\r\n    return {\r\n      success: false,\r\n      error: error instanceof Error ? error.message : \"알 수 없는 오류가 발생했습니다.\",\r\n    };\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;;;IAesB,kBAAA,WAAA,GAAA,IAAA,iXAAA,EAAA,8CAAA,sWAAA,EAAA,KAAA,GAAA,4WAAA,EAAA"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///C:/cording/landing-page-design/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,uOAAO,EAAC,IAAA,iMAAI,EAAC;AACtB"}},
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///C:/cording/landing-page-design/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost:\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\n        icon: 'size-9',\n        'icon-sm': 'size-8',\n        'icon-lg': 'size-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'button'> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : 'button'\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,qPAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,+SAAI,GAAG;IAE9B,qBACE,4TAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAnBS"}},
    {"offset": {"line": 102, "column": 0}, "map": {"version":3,"sources":["file:///C:/cording/landing-page-design/components/chatbot.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useRef, useEffect } from \"react\";\r\nimport { MessageCircle, X, Send } from \"lucide-react\";\r\nimport { sendChatMessage } from \"@/actions/gemini\";\r\nimport { Button } from \"@/components/ui/button\";\r\n\r\ninterface ChatMessage {\r\n  role: \"user\" | \"assistant\";\r\n  content: string;\r\n}\r\n\r\nexport default function Chatbot() {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [messages, setMessages] = useState<ChatMessage[]>([\r\n    {\r\n      role: \"assistant\",\r\n      content: \"안녕하세요! HI-Special 챗봇입니다. 무엇을 도와드릴까요?\",\r\n    },\r\n  ]);\r\n  const [input, setInput] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  useEffect(() => {\r\n    if (isOpen && inputRef.current) {\r\n      inputRef.current.focus();\r\n    }\r\n  }, [isOpen]);\r\n\r\n  const handleSend = async () => {\r\n    if (!input.trim() || isLoading) return;\r\n\r\n    const userMessage = input.trim();\r\n    setInput(\"\");\r\n    setMessages((prev) => [...prev, { role: \"user\", content: userMessage }]);\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      const response = await sendChatMessage(userMessage, messages);\r\n      if (response.success && response.message) {\r\n        setMessages((prev) => [\r\n          ...prev,\r\n          { role: \"assistant\", content: response.message! },\r\n        ]);\r\n      } else {\r\n        setMessages((prev) => [\r\n          ...prev,\r\n          {\r\n            role: \"assistant\",\r\n            content: response.error || \"오류가 발생했습니다. 다시 시도해주세요.\",\r\n          },\r\n        ]);\r\n      }\r\n    } catch (error) {\r\n      setMessages((prev) => [\r\n        ...prev,\r\n        {\r\n          role: \"assistant\",\r\n          content: \"오류가 발생했습니다. 다시 시도해주세요.\",\r\n        },\r\n      ]);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleKeyPress = (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n    if (e.key === \"Enter\" && !e.shiftKey) {\r\n      e.preventDefault();\r\n      handleSend();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* 챗봇 버튼 */}\r\n      {!isOpen && (\r\n        <button\r\n          onClick={() => setIsOpen(true)}\r\n          className=\"fixed bottom-6 right-6 z-50 flex h-14 w-14 items-center justify-center rounded-full bg-primary text-primary-foreground shadow-lg transition-all hover:scale-110 hover:shadow-xl\"\r\n          aria-label=\"챗봇 열기\"\r\n        >\r\n          <MessageCircle className=\"h-6 w-6\" />\r\n        </button>\r\n      )}\r\n\r\n      {/* 챗봇 창 */}\r\n      {isOpen && (\r\n        <div className=\"fixed bottom-6 right-6 z-50 flex h-[600px] w-[400px] flex-col rounded-lg border bg-background shadow-2xl\">\r\n          {/* 헤더 */}\r\n          <div className=\"flex items-center justify-between border-b p-4\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"flex h-8 w-8 items-center justify-center rounded-full bg-primary text-primary-foreground\">\r\n                <MessageCircle className=\"h-4 w-4\" />\r\n              </div>\r\n              <div>\r\n                <h3 className=\"font-semibold\">HI-Special 챗봇</h3>\r\n                <p className=\"text-xs text-muted-foreground\">실시간 상담</p>\r\n              </div>\r\n            </div>\r\n            <button\r\n              onClick={() => setIsOpen(false)}\r\n              className=\"rounded-full p-1 hover:bg-accent\"\r\n              aria-label=\"챗봇 닫기\"\r\n            >\r\n              <X className=\"h-4 w-4\" />\r\n            </button>\r\n          </div>\r\n\r\n          {/* 메시지 영역 */}\r\n          <div className=\"flex-1 overflow-y-auto p-4\">\r\n            <div className=\"space-y-4\">\r\n              {messages.map((message, index) => (\r\n                <div\r\n                  key={index}\r\n                  className={`flex ${\r\n                    message.role === \"user\" ? \"justify-end\" : \"justify-start\"\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`max-w-[80%] rounded-lg px-4 py-2 ${\r\n                      message.role === \"user\"\r\n                        ? \"bg-primary text-primary-foreground\"\r\n                        : \"bg-muted text-muted-foreground\"\r\n                    }`}\r\n                  >\r\n                    <p className=\"text-sm whitespace-pre-wrap\">\r\n                      {message.content}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n              {isLoading && (\r\n                <div className=\"flex justify-start\">\r\n                  <div className=\"max-w-[80%] rounded-lg bg-muted px-4 py-2\">\r\n                    <p className=\"text-sm text-muted-foreground\">입력 중...</p>\r\n                  </div>\r\n                </div>\r\n              )}\r\n              <div ref={messagesEndRef} />\r\n            </div>\r\n          </div>\r\n\r\n          {/* 입력 영역 */}\r\n          <div className=\"border-t p-4\">\r\n            <div className=\"flex gap-2\">\r\n              <input\r\n                ref={inputRef}\r\n                type=\"text\"\r\n                value={input}\r\n                onChange={(e) => setInput(e.target.value)}\r\n                onKeyPress={handleKeyPress}\r\n                placeholder=\"메시지를 입력하세요...\"\r\n                disabled={isLoading}\r\n                className=\"flex-1 rounded-md border bg-background px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\"\r\n              />\r\n              <Button\r\n                onClick={handleSend}\r\n                disabled={!input.trim() || isLoading}\r\n                size=\"icon\"\r\n                className=\"shrink-0\"\r\n              >\r\n                <Send className=\"h-4 w-4\" />\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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"}}]
}